var ytp=ytp||{},$=jQuery.noConflict();function onYouTubePlayerAPIReady(){ytp.YTAPIReady||(ytp.YTAPIReady=!0,jQuery(document).trigger("YTAPIReady"))} (function(b,q){var g=navigator.userAgent;if(!b.browser){b.browser={};b.browser.mozilla=!1;b.browser.webkit=!1;b.browser.opera=!1;b.browser.safari=!1;b.browser.chrome=!1;b.browser.msie=!1;b.browser.ua=g;b.browser.name=navigator.appName;b.browser.fullVersion=""+parseFloat(navigator.appVersion);b.browser.majorVersion=parseInt(navigator.appVersion,10);var u,m,v;-1!=(m=g.indexOf("Opera"))?(b.browser.opera=!0,b.browser.name="Opera",b.browser.fullVersion=g.substring(m+6),-1!=(m=g.indexOf("Version"))&&(b.browser.fullVersion= g.substring(m+8))):-1!=(m=g.indexOf("MSIE"))?(b.browser.msie=!0,b.browser.name="Microsoft Internet Explorer",b.browser.fullVersion=g.substring(m+5)):-1!=g.indexOf("Trident")?(b.browser.msie=!0,b.browser.name="Microsoft Internet Explorer",u=g.indexOf("rv:")+3,b.browser.fullVersion=g.substring(u,u+4)):-1!=(m=g.indexOf("Chrome"))?(b.browser.webkit=!0,b.browser.chrome=!0,b.browser.name="Chrome",b.browser.fullVersion=g.substring(m+7)):-1!=(m=g.indexOf("Safari"))?(b.browser.webkit=!0,b.browser.safari=!0, b.browser.name="Safari",b.browser.fullVersion=g.substring(m+7),-1!=(m=g.indexOf("Version"))&&(b.browser.fullVersion=g.substring(m+8))):-1!=(m=g.indexOf("AppleWebkit"))?(b.browser.webkit=!0,b.browser.name="Safari",b.browser.fullVersion=g.substring(m+7),-1!=(m=g.indexOf("Version"))&&(b.browser.fullVersion=g.substring(m+8))):-1!=(m=g.indexOf("Firefox"))?(b.browser.mozilla=!0,b.browser.name="Firefox",b.browser.fullVersion=g.substring(m+8)):(u=g.lastIndexOf(" ")+1)<(m=g.lastIndexOf("/"))&&(b.browser.name= g.substring(u,m),b.browser.fullVersion=g.substring(m+1),b.browser.name.toLowerCase()==b.browser.name.toUpperCase()&&(b.browser.name=navigator.appName));-1!=(v=b.browser.fullVersion.indexOf(";"))&&(b.browser.fullVersion=b.browser.fullVersion.substring(0,v));-1!=(v=b.browser.fullVersion.indexOf(" "))&&(b.browser.fullVersion=b.browser.fullVersion.substring(0,v));b.browser.majorVersion=parseInt(""+b.browser.fullVersion,10);isNaN(b.browser.majorVersion)&&(b.browser.fullVersion=""+parseFloat(navigator.appVersion), b.browser.majorVersion=parseInt(navigator.appVersion,10));b.browser.version=b.browser.majorVersion}b.browser.android=/Android/i.test(g);b.browser.blackberry=/BlackBerry/i.test(g);b.browser.ios=/iPhone|iPad|iPod/i.test(g);b.browser.operaMobile=/Opera Mini/i.test(g);b.browser.windowsMobile=/IEMobile/i.test(g);b.browser.mobile=b.browser.android||b.browser.blackberry||b.browser.ios||b.browser.windowsMobile||b.browser.operaMobile;q.isDevice=b.browser.mobile;b.fn.CSSAnimate=function(a,c,f,e,p){function g(a){return a.replace(/([A-Z])/g, function(a){return"-"+a.toLowerCase()})}function k(a,b){return"string"!==typeof a||a.match(/^[\-0-9\.]+$/)?""+a+b:a}b.support.CSStransition=function(){var a=(document.body||document.documentElement).style;return void 0!==a.transition||void 0!==a.WebkitTransition||void 0!==a.MozTransition||void 0!==a.MsTransition||void 0!==a.OTransition}();return this.each(function(){var l=this,r=b(this);l.id=l.id||"CSSA_"+(new Date).getTime();var t=t||{type:"noEvent"};if(l.CSSAIsRunning&&l.eventType==t.type)l.CSSqueue= function(){r.CSSAnimate(a,c,f,e,p)};else if(l.CSSqueue=null,l.eventType=t.type,0!==r.length&&a){l.CSSAIsRunning=!0;"function"==typeof c&&(p=c,c=b.fx.speeds._default);"function"==typeof f&&(p=f,f=0);"function"==typeof e&&(p=e,e="cubic-bezier(0.65,0.03,0.36,0.72)");if("string"==typeof c)for(var d in b.fx.speeds)if(c==d){c=b.fx.speeds[d];break}else c=b.fx.speeds._default;c||(c=b.fx.speeds._default);if(b.support.CSStransition){t={"default":"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)", easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)", easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"};t[e]&& (e=t[e]);var n="",s="transitionEnd";b.browser.webkit?(n="-webkit-",s="webkitTransitionEnd"):b.browser.mozilla?(n="-moz-",s="transitionend"):b.browser.opera?(n="-o-",s="otransitionend"):b.browser.msie&&(n="-ms-",s="msTransitionEnd");t=[];for(h in a){d=h;"transform"===d&&(d=n+"transform",a[d]=a[h],delete a[h]);"filter"===d&&(d=n+"filter",a[d]=a[h],delete a[h]);if("transform-origin"===d||"origin"===d)d=n+"transform-origin",a[d]=a[h],delete a[h];"x"===d&&(d=n+"transform",a[d]=a[d]||"",a[d]+=" translateX("+ k(a[h],"px")+")",delete a[h]);"y"===d&&(d=n+"transform",a[d]=a[d]||"",a[d]+=" translateY("+k(a[h],"px")+")",delete a[h]);"z"===d&&(d=n+"transform",a[d]=a[d]||"",a[d]+=" translateZ("+k(a[h],"px")+")",delete a[h]);"rotate"===d&&(d=n+"transform",a[d]=a[d]||"",a[d]+=" rotate("+k(a[h],"deg")+")",delete a[h]);"rotateX"===d&&(d=n+"transform",a[d]=a[d]||"",a[d]+=" rotateX("+k(a[h],"deg")+")",delete a[h]);"rotateY"===d&&(d=n+"transform",a[d]=a[d]||"",a[d]+=" rotateY("+k(a[h],"deg")+")",delete a[h]);"rotateZ"=== d&&(d=n+"transform",a[d]=a[d]||"",a[d]+=" rotateZ("+k(a[h],"deg")+")",delete a[h]);"scale"===d&&(d=n+"transform",a[d]=a[d]||"",a[d]+=" scale("+k(a[h],"")+")",delete a[h]);"scaleX"===d&&(d=n+"transform",a[d]=a[d]||"",a[d]+=" scaleX("+k(a[h],"")+")",delete a[h]);"scaleY"===d&&(d=n+"transform",a[d]=a[d]||"",a[d]+=" scaleY("+k(a[h],"")+")",delete a[h]);"scaleZ"===d&&(d=n+"transform",a[d]=a[d]||"",a[d]+=" scaleZ("+k(a[h],"")+")",delete a[h]);"skew"===d&&(d=n+"transform",a[d]=a[d]||"",a[d]+=" skew("+k(a[h], "deg")+")",delete a[h]);"skewX"===d&&(d=n+"transform",a[d]=a[d]||"",a[d]+=" skewX("+k(a[h],"deg")+")",delete a[h]);"skewY"===d&&(d=n+"transform",a[d]=a[d]||"",a[d]+=" skewY("+k(a[h],"deg")+")",delete a[h]);"perspective"===d&&(d=n+"transform",a[d]=a[d]||"",a[d]+=" perspective("+k(a[h],"px")+")",delete a[h]);0>t.indexOf(d)&&t.push(g(d))}var h=t.join(","),m=function(){r.off(s+"."+l.id);clearTimeout(l.timeout);r.css(n+"transition","");"function"==typeof p&&p(r);l.called=!0;l.CSSAIsRunning=!1;"function"== typeof l.CSSqueue&&(l.CSSqueue(),l.CSSqueue=null)},q={};b.extend(q,a);q[n+"transition-property"]=h;q[n+"transition-duration"]=c+"ms";q[n+"transition-delay"]=f+"ms";q[n+"transition-style"]="preserve-3d";q[n+"transition-timing-function"]=e;setTimeout(function(){r.one(s+"."+l.id,m);r.css(q)},1);l.timeout=setTimeout(function(){r.called||!p?(r.called=!1,l.CSSAIsRunning=!1):(r.css(n+"transition",""),p(r),l.CSSAIsRunning=!1,"function"==typeof l.CSSqueue&&(l.CSSqueue(),l.CSSqueue=null))},c+f+100)}else{for(h in a)"transform"=== h&&delete a[h],"filter"===h&&delete a[h],"transform-origin"===h&&delete a[h],"auto"===a[h]&&delete a[h];p&&"string"!==typeof p||(p="linear");r.animate(a,c,p)}}})};var w=function(a){return"http://youtu.be/"==a.substr(0,16)?a.replace("http://youtu.be/",""):-1<a.indexOf("http")?a.match(/[\\?&]v=([^&#]*)/)[1]:a};b.mbYTPlayer={name:"jquery.mb.YTPlayer",version:"2.7.0",author:"Matteo Bicocchi",defaults:{containment:"body",ratio:"16/9",videoURL:null,startAt:0,stopAt:0,autoPlay:!0,vol:100,addRaster:!1,opacity:1, quality:"default",mute:!1,loop:!0,showControls:!0,showAnnotations:!1,showYTLogo:!0,stopMovieOnClick:!1,realfullscreen:!0,gaTrack:!0,onReady:function(a){},onStateChange:function(a){},onPlaybackQualityChange:function(a){}, onError:function(a){}},controls:{play:"<span class='niyt play'></span>",pause:"<span class='niyt pause'></span>",mute:"<span class='niyt mute'></span>",unmute:"<span class='niyt unmute'></span>",onlyYT:"<span class='niyt fullscreen'></span>",showSite:"<span class='niyt-fullscreen'></span>",ytLogo:"Y"},rasterImg:"images/raster.png",rasterImgRetina:"images/raster@2x.png",locationProtocol:"https:",buildPlayer:function(a){return this.each(function(){var c=this,f=b(c);c.loop=0; c.opt={};f.addClass("mb_YTVPlayer");var e=f.data("property")&&"string"==typeof f.data("property")?eval("("+f.data("property")+")"):f.data("property");"undefined"!=typeof e.vol&&(e.vol=0==e.vol?e.vol=1:e.vol);b.extend(c.opt,b.mbYTPlayer.defaults,a,e);if(b.browser.msie||b.browser.opera||self.location.href!=top.location.href)c.opt.realfullscreen=!1;f.attr("id")||f.attr("id","YTP_"+(new Date).getTime());c.opt.id=c.id;c.isAlone=!1;var p="mbYTP_"+c.id,g=this.opt.videoURL?w(this.opt.videoURL):f.attr("href")? w(f.attr("href")):!1;c.videoID=g;c.opt.showAnnotations=c.opt.showAnnotations?"0":"3";var k={autoplay:0,modestbranding:1,controls:0,showinfo:0,rel:0,enablejsapi:1,version:3,playerapiid:p,origin:"*",allowfullscreen:!0,wmode:"transparent",iv_load_policy:c.opt.showAnnotations},e=!1;document.createElement("video").canPlayType&&(e=!0);e&&b.extend(k,{html5:1});b.browser.msie&&9>b.browser.version&&(this.opt.opacity=1);var l=b("<div/>").attr("id",p).addClass("playerBox"),e=b("<div/>").css({position:"absolute", top:0,left:0,width:"100%",height:"100%"}).addClass("YTPOverlay");c.isSelf="self"==c.opt.containment;c.opt.containment="self"==c.opt.containment?b(this):b(c.opt.containment);c.isBackground="body"==c.opt.containment.get(0).tagName.toLowerCase();if(!c.isBackground||!q.backgroundIsInited)if(c.opt.containment.is(b(this))?c.isPlayer=!0:f.hide(),q.isDevice&&c.isBackground)f.remove();else{c.opt.addRaster?e.addClass(window.retina||1<window.devicePixelRatio?"raster retina":"raster"):e.removeClass("raster retina"); var r=b("<div/>").addClass("mbYTP_wrapper").attr("id","wrapper_"+p);r.css({position:"absolute",zIndex:0,minWidth:"100%",minHeight:"100%",left:0,top:0,overflow:"hidden",opacity:0});l.css({position:"absolute",zIndex:0,width:"100%",height:"100%",top:0,left:0,overflow:"hidden",opacity:this.opt.opacity});r.append(l);c.opt.containment.children().not("script, style").each(function(){"static"==b(this).css("position")&&b(this).css("position","relative")});c.isBackground?(b("body").css({position:"relative", minWidth:"100%",minHeight:"100%",zIndex:1,boxSizing:"border-box"}),r.css({position:"fixed",top:0,left:0,zIndex:0,webkitTransform:"translateZ(0)"}),f.hide()):"static"==c.opt.containment.css("position")&&c.opt.containment.css({position:"relative"});c.opt.containment.prepend(r);c.wrapper=r;l.css({opacity:1});q.isDevice||(l.after(e),c.overlay=e);if(!c.isBackground)e.on("mouseenter",function(){f.find(".mb_YTVPBar").addClass("visible")}).on("mouseleave",function(){f.find(".mb_YTVPBar").removeClass("visible")}); q.YTAPIReady?setTimeout(function(){b(document).trigger("YTAPIReady")},100):(b("#YTAPI").remove(),e=b("<script>\x3c/script>").attr({src:b.mbYTPlayer.locationProtocol+"//www.youtube.com/player_api?v="+b.mbYTPlayer.version,id:"YTAPI"}),b("head title").after(e));b(document).on("YTAPIReady",function(){if(!(c.isBackground&&q.backgroundIsInited||c.isInit)){if(c.isBackground&&c.opt.stopMovieOnClick)b(document).off("mousedown.ytplayer").on("mousedown,.ytplayer",function(a){a=b(a.target);(a.is("a")||a.parents().is("a"))&& f.pauseYTP()});c.isBackground&&(q.backgroundIsInited=!0);c.opt.autoPlay="undefined"==typeof c.opt.autoPlay?c.isBackground?!0:!1:c.opt.autoPlay;c.opt.vol=c.opt.vol?c.opt.vol:100;b.mbYTPlayer.getDataFromFeed(c.videoID,c);b(c).on("YTPChanged",function(){c.isInit||(c.isInit=!0,q.isDevice&&!c.isBackground?new YT.Player(p,{videoId:c.videoID.toString(),height:"100%",width:"100%",videoId:c.videoID,events:{onReady:function(a){c.player=a.target;l.css({opacity:1});c.wrapper.css({opacity:1});f.optimizeDisplay()}, onStateChange:function(){}}}):new YT.Player(p,{videoId:c.videoID.toString(),playerVars:k,events:{onReady:function(a){c.player=a.target;if(!c.isReady){c.isReady=!0;c.playerEl=c.player.getIframe();f.optimizeDisplay();c.videoID=g;b(window).on("resize.YTP",function(){f.optimizeDisplay()});c.opt.showControls&&b(c).buildYTPControls();var d=c.opt.startAt?c.opt.startAt:1;c.player.setVolume(0);b(c).muteYTPVolume();b.mbYTPlayer.checkForState(c);c.checkForStartAt=setInterval(function(){var a=c.player.getVideoLoadedFraction()> d/c.player.getDuration();if(c.player.getCurrentTime()>=d&&0<c.player.getDuration()&&a){clearInterval(c.checkForStartAt);c.player.setVolume(0);b(c).muteYTPVolume();if("function"==typeof c.opt.onReady)c.opt.onReady(f);c.opt.autoPlay?f.playYTP():c.player.pauseVideo();c.opt.autoPlay?f.playYTP():c.player.pauseVideo();c.opt.mute||b(c).unmuteYTPVolume();f.css("background-image","none");c.wrapper.CSSAnimate({opacity:c.isAlone?1:c.opt.opacity},2E3);b.mbYTPlayer.checkForState(c)}else c.player.playVideo(),c.player.seekTo(d, !0)},100)}},onStateChange:function(a){if("function"==typeof a.target.getPlayerState){a=a.target.getPlayerState();if("function"==typeof c.opt.onStateChange)c.opt.onStateChange(f,a);var d=b("#controlBar_"+c.id),e=c.opt;if(0==a){if(c.state==a)return;c.state=a;c.player.pauseVideo();var k=c.opt.startAt?c.opt.startAt:1;e.loop?(c.wrapper.css({opacity:0}),f.playYTP(),c.player.seekTo(k,!0)):c.isBackground||(c.player.seekTo(k,!0),f.playYTP(),setTimeout(function(){f.pauseYTP()},10));d.find(".mb_YTVPPlaypause").html(b.mbYTPlayer.controls.play); b(c).trigger("YTPEnd")}if(3==a){if(c.state==a)return;c.state=a;c.player.setPlaybackQuality(c.opt.quality);d.find(".mb_YTVPPlaypause").html(b.mbYTPlayer.controls.play);b(c).trigger("YTPBuffering")}if(-1==a){if(c.state==a)return;c.state=a;c.wrapper.css({opacity:0});b(c).trigger("YTPUnstarted")}if(1==a){if(c.state==a)return;c.state=a;c.player.setPlaybackQuality(c.opt.quality);d.find(".mb_YTVPPlaypause").html(b.mbYTPlayer.controls.pause);b(c).trigger("YTPStart");"undefined"!=typeof _gaq&&eval(c.opt.gaTrack)&& _gaq.push(["_trackEvent","YTPlayer","Play",c.title||c.videoID.toString()]);"undefined"!=typeof ga&&eval(c.opt.gaTrack)&&ga("send","event","YTPlayer","play",c.title||c.videoID.toString())}2==a&&c.state!=a&&(c.state=a,d.find(".mb_YTVPPlaypause").html(b.mbYTPlayer.controls.play),b(c).trigger("YTPPause"))}},onPlaybackQualityChange:function(a){if("function"==typeof c.opt.onPlaybackQualityChange)c.opt.onPlaybackQualityChange(f)},onError:function(a){150==a.data&&(console.log("Embedding this video is restricted by Youtube."), c.isPlayList&&b(c).playNext());2==a.data&&c.isPlayList&&b(c).playNext();if("function"==typeof c.opt.onError)c.opt.onError(f,a)}}}))})}})}})},getDataFromFeed:function(a,c){c.videoID=a;b.browser.msie?("auto"==c.opt.ratio?c.opt.ratio="16/9":c.opt.ratio,c.hasData||(c.hasData=!0,setTimeout(function(){b(c).trigger("YTPChanged")},100))):(b.getJSON(b.mbYTPlayer.locationProtocol+"//gdata.youtube.com/feeds/api/videos/"+a+"?v=2&alt=jsonc",function(a,e,p){c.dataReceived=!0;a=a.data;c.title=a.title;c.videoData= a;"auto"==c.opt.ratio&&(c.opt.ratio=a.aspectRatio&&"widescreen"===a.aspectRatio?"16/9":"4/3");c.hasData||(c.hasData=!0,c.isPlayer&&c.opt.containment.css({background:"rgba(0,0,0,0.5) url("+c.videoData.thumbnail.hqDefault+") center center",backgroundSize:"cover"}));b(c).trigger("YTPChanged")}),setTimeout(function(){c.dataReceived||c.hasData||(c.hasData=!0,b(c).trigger("YTPChanged"))},1500))},getVideoID:function(){return this.get(0).videoID||!1},setVideoQuality:function(a){this.get(0).player.setPlaybackQuality(a)}, YTPlaylist:function(a,c,f){var e=this.get(0);e.isPlayList=!0;c&&(a=b.shuffle(a));e.videoID||(e.videos=a,e.videoCounter=0,e.videoLength=a.length,b(e).data("property",a[0]),b(e).mb_YTPlayer());if("function"==typeof f)b(e).on("YTPChanged",function(){f(e)});b(e).on("YTPEnd",function(){b(e).playNext()})},playNext:function(){var a=this.get(0);a.videoCounter++;a.videoCounter>=a.videoLength&&(a.videoCounter=0);b(a.playerEl).css({opacity:0});b(a).changeMovie(a.videos[a.videoCounter])},playPrev:function(){var a= this.get(0);a.videoCounter--;0>a.videoCounter&&(a.videoCounter=a.videoLength-1);b(a.playerEl).css({opacity:0});b(a).changeMovie(a.videos[a.videoCounter])},changeMovie:function(a){var c=this.get(0);c.opt.startAt=0;c.opt.stopAt=0;c.opt.mute=!0;a&&b.extend(c.opt,a);c.videoID=w(c.opt.videoURL);b(c).pauseYTP();var f=b.browser.msie?1E3:0;b(c.playerEl).CSSAnimate({opacity:0},f);setTimeout(function(){b(c).getPlayer().cueVideoByUrl(encodeURI(b.mbYTPlayer.locationProtocol+"//www.youtube.com/v/"+c.videoID), 1,c.opt.quality);b(c).playYTP();b(c).one("YTPStart",function(){c.wrapper.CSSAnimate({opacity:c.isAlone?1:c.opt.opacity},1E3);b(c.playerEl).CSSAnimate({opacity:1},f);c.opt.startAt&&c.player.seekTo(c.opt.startAt);b.mbYTPlayer.checkForState(c);c.opt.autoPlay||b(c).pauseYTP()});c.opt.mute?b(c).muteYTPVolume():b(c).unmuteYTPVolume()},f);c.opt.addRaster?c.overlay.addClass(window.retina||1<window.devicePixelRatio?"raster retina":"raster"):(c.overlay.removeClass("raster"),c.overlay.removeClass("retina")); b("#controlBar_"+c.id).remove();c.opt.showControls&&b(c).buildYTPControls();b.mbYTPlayer.getDataFromFeed(c.videoID,c);b(c).optimizeDisplay()},getPlayer:function(){return b(this).get(0).player},playerDestroy:function(){var a=this.get(0);q.YTAPIReady=!1;q.backgroundIsInited=!1;a.isInit=!1;a.videoID=null;a.wrapper.remove();b("#controlBar_"+a.id).remove()},fullscreen:function(a){function c(a,b){for(var c=["webkit","moz","ms","o",""],e=0,f,h;e<c.length&&!a[f];){f=b;""==c[e]&&(f=f.substr(0,1).toLowerCase()+ f.substr(1));f=c[e]+f;h=typeof a[f];if("undefined"!=h)return"function"==h?a[f]():a[f];e++}}function f(a){c(a,"RequestFullScreen")}var e=this.get(0);"undefined"==typeof a&&(a=e.opt.realfullscreen);a=eval(a);var p=b("#controlBar_"+e.id),g=p.find(".mb_OnlyYT"),k=e.isSelf?e.opt.containment:e.wrapper;if(a){var l=b.browser.mozilla?"mozfullscreenchange":b.browser.webkit?"webkitfullscreenchange":"fullscreenchange";b(document).off(l).on(l,function(){c(document,"IsFullScreen")||c(document,"FullScreen")?(b(e).setVideoQuality("high"), b(e).trigger("YTPFullScreenStart")):(e.isAlone=!1,g.html(b.mbYTPlayer.controls.onlyYT),b(e).setVideoQuality(e.opt.quality),k.removeClass("fullscreen"),k.CSSAnimate({opacity:e.opt.opacity},500),k.css({zIndex:0}),e.isBackground?b("body").after(p):e.wrapper.before(p),b(window).resize(),b(e).trigger("YTPFullScreenEnd"))})}e.isAlone?(a?(c(document,"FullScreen")||c(document,"IsFullScreen"))&&c(document,"CancelFullScreen"):(k.CSSAnimate({opacity:e.opt.opacity},500),k.css({zIndex:0})),g.html(b.mbYTPlayer.controls.onlyYT), e.isAlone=!1):(a?(e.player.getPlayerState(),k.css({opacity:0}),k.addClass("fullscreen"),f(k.get(0)),setTimeout(function(){k.CSSAnimate({opacity:1},1E3);e.wrapper.append(p);b(e).optimizeDisplay();e.player.seekTo(e.player.getCurrentTime()+.1,!0)},500)):k.css({zIndex:1E4}).CSSAnimate({opacity:1},1E3),g.html(b.mbYTPlayer.controls.showSite),e.isAlone=!0)},playYTP:function(){var a=this.get(0);"undefined"!==typeof a.player&&(b("#controlBar_"+a.id).find(".mb_YTVPPlaypause").html(b.mbYTPlayer.controls.pause), a.player.playVideo(),a.wrapper.CSSAnimate({opacity:a.isAlone?1:a.opt.opacity},2E3),b(a).on("YTPStart",function(){b(a).css("background-image","none")}))},toggleLoops:function(){var a=this.get(0),b=a.opt;1==b.loop?b.loop=0:(b.startAt?a.player.seekTo(b.startAt):a.player.playVideo(),b.loop=1)},stopYTP:function(){var a=this.get(0);b("#controlBar_"+a.id).find(".mb_YTVPPlaypause").html(b.mbYTPlayer.controls.play);a.player.stopVideo()},pauseYTP:function(){var a=this.get(0);b("#controlBar_"+a.id).find(".mb_YTVPPlaypause").html(b.mbYTPlayer.controls.play); a.player.pauseVideo()},seekToYTP:function(a){this.get(0).player.seekTo(a,!0)},setYTPVolume:function(a){var c=this.get(0);a||c.opt.vol||0!=c.player.getVolume()?!a&&0<c.player.getVolume()||a&&c.player.getVolume()==a?b(c).muteYTPVolume():c.opt.vol=a:b(c).unmuteYTPVolume();c.player.setVolume(c.opt.vol)},muteYTPVolume:function(){var a=this.get(0);a.player.mute();a.player.setVolume(0);b("#controlBar_"+a.id).find(".mb_YTVPMuteUnmute").html(b.mbYTPlayer.controls.unmute);b(a).addClass("isMuted");b(a).trigger("YTPMuted")}, unmuteYTPVolume:function(){var a=this.get(0);a.player.unMute();a.player.setVolume(a.opt.vol);b("#controlBar_"+a.id).find(".mb_YTVPMuteUnmute").html(b.mbYTPlayer.controls.mute);b(a).removeClass("isMuted");b(a).trigger("YTPUnmuted")},manageYTPProgress:function(){var a=this.get(0),c=b("#controlBar_"+a.id),f=c.find(".mb_YTVPProgress"),e=c.find(".mb_YTVPLoaded"),c=c.find(".mb_YTVTime"),g=f.outerWidth(),f=Math.floor(a.player.getCurrentTime()),m=Math.floor(a.player.getDuration()),g=f*g/m,a=100*a.player.getVideoLoadedFraction(); e.css({left:0,width:a+"%"});c.css({left:0,width:g});return{totalTime:m,currentTime:f}},buildYTPControls:function(){var a=this.get(0),c=a.opt;c.showYTLogo=c.showYTLogo||c.printUrl;if(!b("#controlBar_"+a.id).length){var f=b("<span/>").attr("id","controlBar_"+a.id).addClass("mb_YTVPBar").css({whiteSpace:"noWrap",position:a.isBackground?"fixed":"absolute",zIndex:a.isBackground?1E4:1E3}).hide(),e=b("<div/>").addClass("buttonBar"),g=b("<span>"+b.mbYTPlayer.controls.play+"</span>").addClass("mb_YTVPPlaypause ytpicon").click(function(){1== a.player.getPlayerState()?b(a).pauseYTP():b(a).playYTP()}),m=b("<span>"+b.mbYTPlayer.controls.mute+"</span>").addClass("mb_YTVPMuteUnmute ytpicon").click(function(){0==a.player.getVolume()?b(a).unmuteYTPVolume():b(a).muteYTPVolume()}),k=b("<span/>").addClass("mb_YTVPTime"),l=c.videoURL;0>l.indexOf("http")&&(l=b.mbYTPlayer.locationProtocol+"//www.youtube.com/watch?v="+c.videoURL);var r=b("<span/>").html(b.mbYTPlayer.controls.ytLogo).addClass("mb_YTVPUrl ytpicon").attr("title","view on YouTube").on("click", function(){window.open(l,"viewOnYT")}),q=b("<span/>").html(b.mbYTPlayer.controls.onlyYT).addClass("mb_OnlyYT ytpicon").on("click",function(){b(a).fullscreen(c.realfullscreen)}),d=b("<div/>").addClass("mb_YTVPProgress").css("position","absolute").click(function(b){s.css({width:b.clientX-s.offset().left});a.timeW=b.clientX-s.offset().left;f.find(".mb_YTVPLoaded").css({width:0});b=Math.floor(a.player.getDuration());a["goto"]=s.outerWidth()*b/d.outerWidth();a.player.seekTo(parseFloat(a["goto"]),!0);f.find(".mb_YTVPLoaded").css({width:0})}), n=b("<div/>").addClass("mb_YTVPLoaded").css("position","absolute"),s=b("<div/>").addClass("mb_YTVTime").css("position","absolute");d.append(n).append(s);e.append(g).append(m).append(k);c.showYTLogo&&e.append(r);(a.isBackground||eval(a.opt.realfullscreen)&&!a.isBackground)&&e.append(q);f.append(e).append(d);a.isBackground?b("body").after(f):(f.addClass("inlinePlayer"),a.wrapper.before(f));f.fadeIn()}},checkForState:function(a){clearInterval(a.getState);a.getState=setInterval(function(){var c=b(a).manageYTPProgress(), f=b(a),e=b("#controlBar_"+a.id),g=a.opt,m=a.opt.startAt?a.opt.startAt:1,k=a.opt.stopAt>a.opt.startAt?a.opt.stopAt:0,k=k<a.player.getDuration()?k:0;0==a.player.getVolume()?f.addClass("isMuted"):f.removeClass("isMuted");c.totalTime?e.find(".mb_YTVPTime").html(b.mbYTPlayer.formatTime(c.currentTime)+" / "+b.mbYTPlayer.formatTime(c.totalTime)):e.find(".mb_YTVPTime").html("-- : -- / -- : --");1==a.player.getPlayerState()&&(parseFloat(a.player.getDuration()-3)<a.player.getCurrentTime()||0<k&&parseFloat(a.player.getCurrentTime())> k)&&!a.isEnded&&(a.isEnded=!0,setTimeout(function(){a.isEnded=!1},2E3),a.isPlayList?(clearInterval(a.getState),b(a).trigger("YTPEnd")):g.loop&&a.player.seekTo(m,!0))},1)},formatTime:function(a){var b=Math.floor(a/60);a=Math.floor(a-60*b);return(9>=b?"0"+b:b)+" : "+(9>=a?"0"+a:a)}};b.fn.toggleVolume=function(){var a=this.get(0);if(a){if(a.player.isMuted())return b(a).unmuteYTPVolume(),!0;b(a).muteYTPVolume();return!1}};b.fn.optimizeDisplay=function(){var a=this.get(0),c=a.opt,f=b(a.playerEl),e;e=a.wrapper; a=e.outerWidth();e=e.outerHeight();var g,m,k,l;g=a+24*a/100;m="16/9"==c.ratio?Math.ceil(9*a/16):Math.ceil(3*a/4);k=-((m-e)/2);l=-(12*a/100);m<e&&(m=e+24*e/100,g="16/9"==c.ratio?Math.floor(16*e/9):Math.floor(4*e/3),k=-(12*e/100),l=-((g-a)/2));f.css({width:g+100,height:m+100,marginTop:k-50,marginLeft:l-50})};b.shuffle=function(a){a=a.slice();for(var b=a.length,f=b;f--;){var e=parseInt(Math.random()*b),g=a[f];a[f]=a[e];a[e]=g}return a};b.fn.mb_YTPlayer=b.mbYTPlayer.buildPlayer;b.fn.YTPlaylist=b.mbYTPlayer.YTPlaylist; b.fn.playNext=b.mbYTPlayer.playNext;b.fn.playPrev=b.mbYTPlayer.playPrev;b.fn.changeMovie=b.mbYTPlayer.changeMovie;b.fn.getVideoID=b.mbYTPlayer.getVideoID;b.fn.getPlayer=b.mbYTPlayer.getPlayer;b.fn.playerDestroy=b.mbYTPlayer.playerDestroy;b.fn.fullscreen=b.mbYTPlayer.fullscreen;b.fn.buildYTPControls=b.mbYTPlayer.buildYTPControls;b.fn.playYTP=b.mbYTPlayer.playYTP;b.fn.toggleLoops=b.mbYTPlayer.toggleLoops;b.fn.stopYTP=b.mbYTPlayer.stopYTP;b.fn.pauseYTP=b.mbYTPlayer.pauseYTP;b.fn.seekToYTP=b.mbYTPlayer.seekToYTP; b.fn.muteYTPVolume=b.mbYTPlayer.muteYTPVolume;b.fn.unmuteYTPVolume=b.mbYTPlayer.unmuteYTPVolume;b.fn.setYTPVolume=b.mbYTPlayer.setYTPVolume;b.fn.setVideoQuality=b.mbYTPlayer.setVideoQuality;b.fn.manageYTPProgress=b.mbYTPlayer.manageYTPProgress})(jQuery,ytp);